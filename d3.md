# d3

## 安装使用

+ 引入

```js
<script type="text/javascript" src="http://d3js.org/d3.v5.min.js"></script>
```

+ npm安装

```js
npm install -D d3
```

## 选择元素和绑定数据

1、选择元素

- d3.select()
- d3.selectAll()

```js
var body = d3.select("body");//选择文档中的body元素
var svg = body.select("svg");//选择body中的svg元素
var p = body.selectAll("p");//选择body中所有的p元素
var p1 = body.select("p");//选择body中第一个p元素
```

2、绑定数据

- data()：讲一个数组绑定到选择集上，数组各项和选择集各元素绑定，也就是一一对应的关系
- datum()：将一个数据绑定到所有选择集上

## Update、Enter、Exit

## 选择、插入、删除

1、选择元素

- select()
- selectAll()

2、插入元素

- append()：在选择集最后面插入元素
- insert()：在选择集最前面插入元素

3、删除元素

- remove()：选择某个元素删除即可

## 比例尺

- domain([])：值域
- range([])：定义域

1、线性比例尺

```js
let scale = d3.scaleLinear()
	.domain([0, d3.max(dataset)])
	.range([0, value])//如果是y轴，则需要range([value, 0])
```

2、 序数比例尺

- d3.range(args)：参数args如果是其它类型数据，但返回值是空数组，如果是一个数字，则会返回一个序列化的数组
- d3.schemeCategory10：返回一个颜色集合的数组

```js
let scale = d3.scaleOrdinal()
	.domain(d3.range(dataset.length))
	.range(d3.schemeCategory10)
```

3、序数段比例尺

```js
let scale = d3.scaleBand()
	.domain(d3.range(dataset.length))
	.rangeRound([0, value])
scale.step() = (value - 0) / dataset.length//返回一个平均长度
```

4、时间比例尺

```js
let scale = d3.scaleTime()
```

## 坐标轴

```js
//创建坐标轴
axis = d3.axisLeft(scale)//坐标轴的方向及对应的比例尺
	.ticks(n)//刻度的数量
//绘制坐标轴
g.append('g').call(axis)
```

## 过渡

- transition()：添加过渡，也就是从前一个属性过渡到后一个属性
- duration(2000)，表示过渡时间持续2秒
- delay(500)，表示延迟0.4秒后再进行过渡
- ease(d3.easeElasticInOut)表示过渡方式

## 交互式操作

- on('eventname', function)：监听事件
- d3.select(this)：this的使用





要想涨，先有量。

由跌转涨量先强，百分之三是标准，

盘跌它涨转强量，百分之五不能追，

要等回拉靠线莫心慌！十五以上要谨慎，

(十五指换手率)，三十以上要提防，

(三十指换手率)，三日没有新高现，只卖不买没商量！

再来个震荡市的炒股真经。这6句炒股口诀是：

早上大跌要买，早上大涨要卖，

下午大涨不追，下午大跌次日买，

早上大跌不割，不涨不跌睡觉。

盘中买卖

集合竞价很重要， 盘中更要量跟上，

量比超过2.5，主力开始动手了，

上来先冲3.5，千万别急乱追涨，

回落不缩量，反身再冲上，

打横走一走，买它没商量，

放量上，再缩量，过不过顶看二样。

上冲角度要更陡，单笔买量更要强。

经典K线买卖口诀

一、高空见到头肩顶 头肩离场脑清醒

口诀： 高空见到头肩顶， 头肩离场脑清醒， 向下突破全清仓，抱着幻想是陷阱。



头肩顶具有以下特征：

1.在上升途中出现，特别是在高价区出现更有实战意义;

2.由三个峰顶组成，分别为左肩，头和右肩，左肩和右肩的最高点基本相同，而头部最高点比左、右肩的最高点要高;

3.前二次冲高回落的止跌点基本相同，二点连线构成头肩顶的颈线;

4.成交量依左肩、头、右肩依次减少;

5.头肩顶的变化图形，可以是一头双肩,左右各二个肩；也可以是一头双左肩；也可以一头双右肩；也可以是多头多肩等复合头肩顶形态。

操作原则：当股价跌破颈线位时为第一卖点，当股价回试颈线位没有站到颈线位之上时，为第二卖点。需要说明的是，按照操作原则的两个卖点操作，往往股价跌落很多。

根据双肩呼应原理，第一卖出点应在右肩处，而第二卖出点是在股价跌破颈线位后。头肩顶对多方杀伤力度的大小，与它形成时间长短成正比，因此头肩顶的周K线图和月K线图显得格外重要。也就是说如果周K线、月K线图形成头肩顶时，则该股票要有一个较长时间的跌势。

二、圆底图形细观察 沿着弧底缓慢爬

口诀：圆底图形细观察，沿着弧度缓慢爬，均线多头量价升，此时不买还等啥。



圆底具有以下特征：

1.出现在跌势中;

2.下跌的速度由快到慢，由慢到牛皮，之后再由疲塌到慢，然后再快速上升，股价形成圆弧形态;

3.成交量的变化由小到极度萎缩，然后再温和放大，成交量形成圆弧形态;

4.时间上，大圆底构筑的时间与上升涨幅成正比，时间越长涨幅越大。

需要说明的是，大圆底的圆形往往都是长线庄家特意画的，历来股市高手都十分重视这种图形。买入的时机十分重要，过早入市，常常会陷入漫长的筑底行情中。把握要点是密切关注成交量的变化，在股价和成交量均成圆弧形态时，买入的必要条件是在圆弧形态的右端成交量放大，股价上冲，均线系统多头排列，MACD金叉或多头排列。



买入技巧口诀

（一）巨阳入海，放心购买

股价跌到低位后，某日大幅低开，当天收出一条巨大的阳线，这条阳线就叫巨阳落海。从理论上讲，该图线是多方发起攻击的一个重要信号，尽管开盘时，空方拼命打压，但多方早就做好了反击的准备，当空方的脚跟尚未站稳时，多方就全力以赴，展开战斗，将空方一网打尽，形成一条特大的阳线。



（二）天上雨来急，多头应进场

股价加速下跌的走势；地下水亦涨，指的是成交量逐日增加的形态。两者联系起来看，就成为“天上雨来急，地下水亦涨”的一幅江南水乡春雨图。

（1）该形态出现前，股价应由一断较深的跌幅，基本跌到了底部。

（2）形成该形态的图线至少要有三条，总跌幅应在10%以上。

（3）该形态中的每条阴线应相连，中间不能插入阳线。

（4）该形态形成过程中，成交量也应相应增加。具备上述特征的走势，就是可信的“天上雨来急，地下水亦涨”形态，是可信的买入信号，可以放心做多。



（三）五阳上阵，股价弹升

五阳上阵是指股价跌到低位后连续出现的五条小阳线的走势形态。这五条阳线，像五位英雄战士，整装待发，以便攻城夺地，取代空军，表明后市将是多方的天下。此时可随五阳一道，参加夺城战斗，分享未来的胜利成果。五条阳线在低位出现时，表明底部做多的力量较强，连续五天都是多方取得胜利，空头已被打的无立身之地，后市股价就会趁机上升。














