# d3

## 安装使用

+ 引入

```js
<script type="text/javascript" src="http://d3js.org/d3.v5.min.js"></script>
```

+ npm安装

```js
npm install -D d3
```

## 选择元素和绑定数据

1、选择元素

- d3.select()
- d3.selectAll()

```js
var body = d3.select("body");//选择文档中的body元素
var svg = body.select("svg");//选择body中的svg元素
var p = body.selectAll("p");//选择body中所有的p元素
var p1 = body.select("p");//选择body中第一个p元素
```

2、绑定数据

- data()：讲一个数组绑定到选择集上，数组各项和选择集各元素绑定，也就是一一对应的关系
- datum()：将一个数据绑定到所有选择集上

## Update、Enter、Exit

## 选择、插入、删除

1、选择元素

- select()
- selectAll()

2、插入元素

- append()：在选择集最后面插入元素
- insert()：在选择集最前面插入元素

3、删除元素

- remove()：选择某个元素删除即可

## 比例尺

- domain([])：值域
- range([])：定义域

1、线性比例尺

```js
let scale = d3.scaleLinear()
	.domain([0, d3.max(dataset)])
	.range([0, value])//如果是y轴，则需要range([value, 0])
```

2、 序数比例尺

- d3.range(args)：参数args如果是其它类型数据，但返回值是空数组，如果是一个数字，则会返回一个序列化的数组
- d3.schemeCategory10：返回一个颜色集合的数组

```js
let scale = d3.scaleOrdinal()
	.domain(d3.range(dataset.length))
	.range(d3.schemeCategory10)
```

3、序数段比例尺

```js
let scale = d3.scaleBand()
	.domain(d3.range(dataset.length))
	.rangeRound([0, value])
scale.step() = (value - 0) / dataset.length//返回一个平均长度
```

4、时间比例尺

```js
let scale = d3.scaleTime()
```

## 坐标轴

```js
//创建坐标轴
axis = d3.axisLeft(scale)//坐标轴的方向及对应的比例尺
	.ticks(n)//刻度的数量
//绘制坐标轴
g.append('g').call(axis)
```

## 过渡

- transition()：添加过渡，也就是从前一个属性过渡到后一个属性
- duration(2000)，表示过渡时间持续2秒
- delay(500)，表示延迟0.4秒后再进行过渡
- ease(d3.easeElasticInOut)表示过渡方式

## 交互式操作

- on('eventname', function)：监听事件
- d3.select(this)：this的使用



















