<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>本地存储</title>
	<style>
		summary {background: #8fd0e0;padding-left: 20px;margin-bottom: 5px;}
		h2 {font: bold 30px/0.8 '隶书';display: inline-block;margin-left: 10px;}
		h3 {font: bold 30px/1.8 '隶书';color: #fff;background: #1f7b9b;}
		h4 {font: bold 24px/1.0 '隶书';text-indent: 10px;}
		p { font: bold 18px/1.5 '隶书';text-indent: 30px;}
		a { font: bold 20px/1.8 '隶书';margin-left: 30px;}
	</style>
</head>
<body>
<!--本地存储  -->
	<h1>本地存储</h1>
	<p>h5之前，存储主要是用cookies。 cookies缺点有数量和长度的限制：每个域的cookie总数有限，一般不超过50个。潜在的安全

	风险：Cookie可能被拦截、篡改。如果cookie被拦截，就有可能取得所有的session信息。用户配置为禁用、有些状态是不可能保

	存在客户端的。</p>

	<p>Web Storage是HTML5引入的一个非常重要的功能，在前端开发中经常用到，可以在客户端本地存储数据，类似cookie，但可实

	现功能要比cookie强大的多</p>
	<!-- localStorage、sessionStorage -->
	<details>
		<summary><h2>localStorage、sessionStorage</h2></summary>
		<h3>一、定义</h3>
			<p>	在HTML5中，新加入了一个localStorage特性，这个特性主要是用来作为本地存储来使用的，
				解决了cookie存储空间不足的问题(cookie中每条cookie的存储空间为4k)，
				localStorage中一般浏览器支持的是5M大小，这个在不同的浏览器中localStorage会有所不同。</p>

		<h3>二、sessionStorage与localStorage区别</h3>
			<p> 1、localStorage和sessionStorage一样都是用来存储客户端临时信息的对象。</p>

			<p>	2、他们均只能存储字符串类型的对象（虽然规范中可以存储其他原生类型的对象，但是目前为止没有浏览器对其进行实现）。</p>

			<p>	3、localStorage生命周期是永久，这意味着除非用户显示在浏览器提供的UI上清除localStorage信息，否则这些信息将永远存在。</p>

			<p>	4、sessionStorage生命周期为当前窗口或标签页，一旦窗口或标签页被永久关闭了，那么所有通过sessionStorage存储的数据也就被清空了。</p>

			<p>	5、不同浏览器无法共享localStorage或sessionStorage中的信息。</p>

		<h3>三、localStorage的优势与局限</h3>
			<h4>localStorage的优势</h4>
				<p>	1、localStorage拓展了cookie的4K限制</p>

				<p>	2、localStorage会可以将第一次请求的数据直接存储到本地，这个相当于一个5M大小的针对于前端页面的数据库，相比于cookie可以节约带宽，但是这个却是只有在高版本的浏览器中才支持的</p>

			<h4>localStorage的局限</h4>

				<p>	1、浏览器的大小不统一，并且在IE8以上的IE版本才支持localStorage这个属性</p>

				<p>	2、目前所有的浏览器中都会把localStorage的值类型限定为string类型，这个在对我们日常比较常见的JSON对象类型需要一些转换</p>

				<p>	3、localStorage在浏览器的隐私模式下面是不可读取的</p>

				<p>	4、localStorage本质上是对字符串的读取，如果存储内容多的话会消耗内存空间，会导致页面变卡</p>

				<p>	5、localStorage不能被爬虫抓取到</p>

		<h3>四、localStorage和sessionStorage的使用</h3>
			<h4>1、首先在使用localStorage的时候，我们需要判断浏览器是否支持localStorage这个属性</h4>

			<h4>2、sessionStorage 和 localStorage 的方法(storage = window.localStorage/sessionStorage)</h4>
				<p>(1)、写入有三种方法：</p>
					<p>	storage.key = value;</p>
					<p>	storage["key"] = value;</p>
					<p>	storage.setItem("key" , value);往对象里增加一个key/value数据（推荐）</p>

				<p>(2)、官方推荐使用getItem\setItem这两种方法对其进行存取</p>

				<p>(3)、storage的删除</p>
					<p>	storage.clear()：将storage的所有内容清除</p>
					<p>	storage.removeItem("key")：将storage中的某个键值对删除</p>

				<p>(4)、storage的键获取</p>
					<p>	storage.getItem(key)：根据key获取值</p>
					<p>	storage.key(n)：使用key()方法,可获取获取第n个key的值(不是value)</p>

		<h3>五、localStorage其他注意事项</h3>
		<p>一般我们会将JSON存入localStorage中，但是在localStorage会自动将localStorage转换成为字符串形式

			这个时候我们可以使用JSON.stringify()这个方法，来将JSON转换成为JSON字符串</p>
		<!-- <script>
			if(!window.localStorage){
	            alert("浏览器支持localstorage");
	        }else{
	            var storage=window.localStorage;
	            var data={
	                name:'xiecanyong',
	                sex:'man',
	                hobby:'program'
	            };
	            var d=JSON.stringify(data);
	            storage.setItem("data",d);
	            console.log(storage.data);
	        }
		</script> -->
		<p>读取之后要将JSON字符串转换成为JSON对象，使用JSON.parse()方法</p>
		<!-- <script>
			var storage=window.localStorage;
            var data={
                name:'xiecanyong',
                sex:'man',
                hobby:'program'
            };
            var d=JSON.stringify(data);
            storage.setItem("data",d);
            //将JSON字符串转换成为JSON对象输出
            var json=storage.getItem("data");
            var jsonObj=JSON.parse(json);
            console.log(typeof jsonObj);
		</script> -->
		<p>打印出来是Object对象，另外还有一点要注意的是，其他类型读取出来也要进行转换</p>
	</details>
	<!-- indexDB -->
	<details>
		<summary><h2>indexDB</h2></summary>
			<a href="https://www.jianshu.com/p/fa52b73e44c2" target="_blank">indexedDB API</a>
			<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API/Using_IndexedDB" target="_blank">indexedDB API</a>
			<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API">API</a>
			<p> IndexedDB是一个事务型数据库系统，类似于基于SQL的RDBMS。</p>

			<p>然而不同的是它使用固定列表，IndexedDB是一个基于JavaScript的面向对象的数据库。</p>

			<p>IndexedDB允许您存储和检索用键索引的对象;</p>

		<h3>异步API</h3>
			<p> 异步 API 方法调用完后会立即返回，而不会阻塞调用线程。</p>

			<p>要异步访问数据库，要调用 window 对象 indexedDB 属性的 open() 方法。该方法返回一个 IDBRequest 对象</p>
	</details>
</body>
</html>